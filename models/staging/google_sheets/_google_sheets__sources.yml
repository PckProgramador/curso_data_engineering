version: 2

sources:
  - name: google_sheets # Name of the source
    schema: google_sheets # Schema where the raw data resides
    database: "{{ env_var('DBT_ENVIRONMENTS') }}_BRONZE_DB" # Dynamic database name based on environment

    quoting:
      # Avoid quoting database, schema, and identifiers unless necessary
      database: false
      schema: false
      identifier: false

    freshness:
      warn_after:
        count: 24
        period: hour
      # error_after:
      #   count: 48
      #   period: hour
      # Note: Freshness tests for test data may not make sense for educational/demo purposes (25/10).

    tables:
      - name: budget
        loaded_at_field: _fivetran_synced 
        description: "Data about budget in the demo environment."

        columns:
          - name: _row
            description: "Row number in the Google Sheet."

          - name: product_id
            description: "UUID of each unique product on the platform."

          - name: quantity
            description: "Number of units for each product per month."
          
          - name: month
            description: "End of the month for the budget entry."
          
          - name: _fivetran_synced
            description: "Timestamp when data was loaded."
            tests:
              - not_null 

